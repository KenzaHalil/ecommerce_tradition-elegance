{% extends "base.html" %}
{% block title %}Accueil - Tradition & √âl√©gance{% endblock %}
{% block content %}
<!-- Banni√®re principale -->
<div class="banner p-5 mb-4 rounded-4 text-center" style="background:linear-gradient(90deg,#FADADD 60%,#E8C872 100%); color:#8B1C2E;">
    <h1 class="display-4 fw-bold mb-3" style="font-family:'Playfair Display',serif;">üå∫ Bienvenue sur Tradition & √âl√©gance</h1>
    <p class="lead mb-4" style="font-size:1.3rem;">
        Votre boutique de robes traditionnelles o√π la beaut√© des coutumes rencontre la modernit√© du design.<br>
        <span style="font-size:1.1rem; color:#8B1C2E;">‚ú® C√©l√©brons ensemble la f√©minit√© et la diversit√© des cultures.</span>
    </p>
    <a href="/catalogue" class="btn btn-elegance btn-lg shadow">D√©couvrir nos collections</a>
</div>

<!-- Carrousel / Slider -->
<div id="carouselElegance" class="carousel slide mb-5" data-bs-ride="carousel">
  <div class="carousel-inner rounded-4 shadow">
    <div class="carousel-item active">
      <img src="{{ url_for('static', filename='images/slider1.jpg') }}" class="d-block w-100" alt="Robe kabyle">
      <div class="carousel-caption d-none d-md-block">
        <h5 class="fw-bold" style="color:#FADADD;">Robe Kabyle Prestige</h5>
        <p>Pi√®ce artisanale, broderie berb√®re</p>
      </div>
    </div>
    <div class="carousel-item">
      <img src="{{ url_for('static', filename='images/slider2.jpg') }}" class="d-block w-100" alt="Caftan marocain">
      <div class="carousel-caption d-none d-md-block">
        <h5 class="fw-bold" style="color:#E8C872;">Caftan Marocain √âl√©gance</h5>
        <p>Ornements dor√©s, coupe moderne</p>
      </div>
    </div>
    <div class="carousel-item">
      <img src="{{ url_for('static', filename='images/slider3.jpg') }}" class="d-block w-100" alt="Abaya orientale">
      <div class="carousel-caption d-none d-md-block">
        <h5 class="fw-bold" style="color:#8B1C2E;">Abaya Orientale Chic</h5>
        <p>Fluidit√© et raffinement</p>
      </div>
    </div>
  </div>
  <button class="carousel-control-prev" type="button" data-bs-target="#carouselElegance" data-bs-slide="prev">
    <span class="carousel-control-prev-icon"></span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#carouselElegance" data-bs-slide="next">
    <span class="carousel-control-next-icon"></span>
  </button>
</div>

<!-- Section Nouveaut√©s -->
<h2 class="fw-bold mb-4" style="font-family:'Playfair Display',serif; color:#8B1C2E;">Nouveaut√©s</h2>
<div class="row mb-5">
    {% for p in new_products %}
    <div class="col-md-4 mb-4">
        <div class="card h-100 shadow-sm border-0">
            <img src="{{ url_for('static', filename='images/' ~ p.id ~ '.jpg') }}" class="card-img-top" alt="{{ p.name }}">
            <div class="card-body d-flex flex-column">
                <h5 class="card-title fw-bold" style="font-family:'Playfair Display',serif;">{{ p.name }}</h5>
                <p class="card-text">{{ p.description }}</p>
                <p class="card-text"><strong>{{ "%.2f"|format(p.price_cents/100) }} ‚Ç¨</strong></p>
                <a href="/product/{{ p.id }}" class="btn btn-elegance fw-bold mt-auto">Voir le produit</a>
            </div>
        </div>
    </div>
    {% endfor %}
</div>

<!-- Section Coups de c≈ìur (carrousel horizontal) -->
<h2 class="fw-bold mb-4" style="font-family:'Playfair Display',serif; color:#E8C872;">Nos coups de c≈ìur</h2>
<div class="d-flex overflow-auto mb-5" style="gap:2rem;">
    {% for p in favorites %}
    <div class="card shadow-sm border-0" style="min-width:260px; max-width:260px;">
        <img src="{{ url_for('static', filename='images/' ~ p.id ~ '.jpg') }}" class="card-img-top" alt="{{ p.name }}">
        <div class="card-body d-flex flex-column">
            <h5 class="card-title fw-bold" style="font-family:'Playfair Display',serif;">{{ p.name }}</h5>
            <p class="card-text"><strong>{{ "%.2f"|format(p.price_cents/100) }} ‚Ç¨</strong></p>
            <a href="/product/{{ p.id }}" class="btn btn-elegance fw-bold mt-auto">D√©couvrir</a>
        </div>
    </div>
    {% endfor %}
</div>

<!-- Bloc informatif -->
<div class="row mb-5">
    <div class="col-md-6 mb-3">
        <div class="p-4 rounded-4 shadow-sm" style="background:#FFF8F0; color:#8B1C2E;">
            <h5 class="fw-bold mb-2" style="font-family:'Playfair Display',serif;">Livraison gratuite d√®s 50‚Ç¨</h5>
            <p>Profitez de la livraison offerte sur toutes vos commandes √† partir de 50‚Ç¨ d‚Äôachat.</p>
        </div>
    </div>
    <div class="col-md-6 mb-3">
        <div class="p-4 rounded-4 shadow-sm" style="background:#EED6C4; color:#8B1C2E;">
            <h5 class="fw-bold mb-2" style="font-family:'Playfair Display',serif;">Pi√®ces artisanales et authentiques</h5>
            <p>Chaque robe est confectionn√©e avec soin, inspir√©e des traditions du Maghreb et d‚Äôailleurs.</p>
        </div>
    </div>
</div>

<!-- Section Avis clientes -->
<h2 class="fw-bold mb-4" style="font-family:'Playfair Display',serif; color:#A3B18A;">Avis clientes</h2>
<div class="row mb-5">
    {% for avis in reviews %}
    <div class="col-md-4 mb-4">
        <div class="card h-100 border-0 shadow-sm" style="background:#FFF8F0;">
            <div class="card-body">
                <div class="d-flex align-items-center mb-2">
                    <img src="{{ url_for('static', filename='images/' ~ avis.photo) }}" alt="Client" class="rounded-circle me-3" width="48" height="48">
                    <div>
                        <span class="fw-bold" style="color:#8B1C2E;">{{ avis.name }}</span>
                        <span class="ms-2" style="color:#E8C872;">{% for _ in range(avis.stars) %}‚òÖ{% endfor %}</span>
                    </div>
                </div>
                <p class="mb-0" style="font-style:italic;">‚Äú{{ avis.comment }}‚Äù</p>
            </div>
        </div>
    </div>
    {% endfor %}
</div>

<!-- Newsletter -->
<div class="newsletter p-4 rounded-4 text-center mb-5" style="background:#FADADD;">
    <h5 class="fw-bold mb-3" style="font-family:'Playfair Display',serif; color:#8B1C2E;">Recevez nos nouveaut√©s ‚úâÔ∏è</h5>
    <form method="post" action="/newsletter" class="d-flex justify-content-center gap-2">
        <input type="email" name="email" class="form-control rounded-pill" placeholder="Votre email" required style="max-width:300px;">
        <button type="submit" class="btn btn-elegance fw-bold rounded-pill">S'inscrire</button>
    </form>
</div>

<!-- Pop-up promo bienvenue (JS √† ajouter dans base.html ou ici) -->
<script>
window.addEventListener('DOMContentLoaded', function() {
    if (!localStorage.getItem('promoShown')) {
        setTimeout(function() {
            let popup = document.createElement('div');
            popup.innerHTML = `
                <div style="position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(250,218,221,0.85);z-index:9999;display:flex;align-items:center;justify-content:center;">
                    <div style="background:#FFF8F0;border-radius:24px;padding:2rem 3rem;box-shadow:0 4px 24px #E8C872;">
                        <h3 style="color:#8B1C2E;font-family:'Playfair Display',serif;">üíù -10% sur votre premi√®re commande !</h3>
                        <p class="mb-3">Utilisez le code <span style="color:#E8C872;font-weight:bold;">ELEGANCE10</span> √† la validation.</p>
                        <button onclick="this.parentElement.parentElement.remove();localStorage.setItem('promoShown','1')" class="btn btn-elegance fw-bold">Fermer</button>
                    </div>
                </div>
            `;
            document.body.appendChild(popup);
        }, 1200);
    }
});
</script>
{% endblock %}